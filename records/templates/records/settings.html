{% extends 'records/base.html' %}

{% block content %}
<div class="container">
    <h2 class="mb-4">Settings</h2>
    
    <div class="row">
        <div class="col-md-3">
            <div class="list-group" id="settingsMenu">
                <a href="#general" class="list-group-item list-group-item-action active" data-bs-toggle="list">
                    <i class="fas fa-cog me-2"></i> General
                </a>
                <a href="#clinic" class="list-group-item list-group-item-action" data-bs-toggle="list">
                    <i class="fas fa-hospital me-2"></i> Clinic Info
                </a>
                <a href="#users" class="list-group-item list-group-item-action" data-bs-toggle="list">
                    <i class="fas fa-users me-2"></i> Users
                </a>
                <a href="#billing" class="list-group-item list-group-item-action" data-bs-toggle="list">
                    <i class="fas fa-credit-card me-2"></i> Billing
                </a>
                <a href="#notifications" class="list-group-item list-group-item-action" data-bs-toggle="list">
                    <i class="fas fa-bell me-2"></i> Notifications
                </a>
            </div>
        </div>
        
        <div class="col-md-9">
            <div class="tab-content" id="settingsContent">
                <!-- General Settings -->
                <div class="tab-pane fade show active" id="general">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">General Settings</h5>
                        </div>
                        <div class="card-body">
                            <form id="generalSettingsForm">
                                <div class="mb-3">
                                    <label for="language" class="form-label">Language</label>
                                    <select class="form-select" id="language" name="language">
                                        <option value="en" selected>English</option>
                                        <option value="es">Español</option>
                                        <option value="fr">Français</option>
                                    </select>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="form-label">Theme</label>
                                    <div class="d-flex gap-3">
                                        <div class="form-check">
                                            <input class="form-check-input theme-option" type="radio" name="theme" id="lightTheme" value="light" checked>
                                            <label class="form-check-label" for="lightTheme">
                                                <i class="fas fa-sun me-1"></i> Light
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input theme-option" type="radio" name="theme" id="darkTheme" value="dark">
                                            <label class="form-check-label" for="darkTheme">
                                                <i class="fas fa-moon me-1"></i> Dark
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input theme-option" type="radio" name="theme" id="systemTheme" value="system">
                                            <label class="form-check-label" for="systemTheme">
                                                <i class="fas fa-desktop me-1"></i> System Default
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="timezone" class="form-label">Time Zone</label>
                                    <select class="form-select" id="timezone" name="timezone">
                                        <option value="UTC-07:00" selected>(UTC-07:00) Mountain Time</option>
                                        <option value="UTC-08:00">(UTC-08:00) Pacific Time</option>
                                        <option value="UTC-06:00">(UTC-06:00) Central Time</option>
                                        <option value="UTC-05:00">(UTC-05:00) Eastern Time</option>
                                    </select>
                                </div>
                                
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="darkMode" name="dark_mode">
                                    <label class="form-check-label" for="darkMode">Enable Dark Mode</label>
                                </div>
                                
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-outline-secondary me-2">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Clinic Information -->
                <div class="tab-pane fade" id="clinic">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Clinic Information</h5>
                        </div>
                        <div class="card-body">
                            <form id="clinicSettingsForm">
                                <div class="mb-3">
                                    <label for="clinicName" class="form-label">Clinic Name</label>
                                    <input type="text" class="form-control" id="clinicName" value="HealthPlus Medical Center" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="clinicAddress" class="form-label">Address</label>
                                    <input type="text" class="form-control mb-2" id="clinicAddress1" value="123 Medical Center Drive" required>
                                    <input type="text" class="form-control" id="clinicAddress2" placeholder="Suite, floor, etc. (optional)">
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="clinicCity" class="form-label">City</label>
                                        <input type="text" class="form-control" id="clinicCity" value="Phoenix" required>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="clinicState" class="form-label">State</label>
                                        <input type="text" class="form-control" id="clinicState" value="Arizona" required>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="clinicZip" class="form-label">ZIP</label>
                                        <input type="text" class="form-control" id="clinicZip" value="85001" required>
                                    </div>
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="clinicPhone" class="form-label">Phone</label>
                                        <input type="tel" class="form-control" id="clinicPhone" value="+1 (602) 555-0123" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="clinicEmail" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="clinicEmail" value="info@healthplusmedical.com" required>
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-outline-secondary me-2">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Users & Permissions -->
                <div class="tab-pane fade" id="users">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Users & Permissions</h5>
                            <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">
                                <i class="fas fa-plus me-1"></i> Add User
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Role</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Dr. Sarah Johnson</td>
                                            <td>sarah.johnson@example.com</td>
                                            <td><span class="badge bg-primary">Admin</span></td>
                                            <td><span class="badge bg-success">Active</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1" title="Edit">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Dr. Michael Chen</td>
                                            <td>michael.chen@example.com</td>
                                            <td><span class="badge bg-info">Doctor</span></td>
                                            <td><span class="badge bg-success">Active</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1" title="Edit">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Billing & Payments -->
                <div class="tab-pane fade" id="billing">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Billing & Payments</h5>
                        </div>
                        <div class="card-body">
                            <form id="billingSettingsForm">
                                <div class="mb-3">
                                    <label for="currency" class="form-label">Currency</label>
                                    <select class="form-select" id="currency" name="currency">
                                        <option value="USD" selected>US Dollar (USD)</option>
                                        <option value="EUR">Euro (EUR)</option>
                                        <option value="GBP">British Pound (GBP)</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="taxRate" class="form-label">Tax Rate (%)</label>
                                    <input type="number" class="form-control" id="taxRate" value="8.25" step="0.01">
                                </div>
                                
                                <h6 class="mt-4 mb-3">Payment Methods</h6>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="cashPayment" checked>
                                    <label class="form-check-label" for="cashPayment">Cash</label>
                                </div>
                                
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="creditCardPayment" checked>
                                    <label class="form-check-label" for="creditCardPayment">Credit/Debit Card</label>
                                </div>
                                
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="insurancePayment" checked>
                                    <label class="form-check-label" for="insurancePayment">Insurance</label>
                                </div>
                                
                                <div class="d-flex justify-content-end mt-4">
                                    <button type="button" class="btn btn-outline-secondary me-2">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Notifications -->
                <div class="tab-pane fade" id="notifications">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Notification Settings</h5>
                        </div>
                        <div class="card-body">
                            <form id="notificationSettingsForm">
                                <h6 class="mb-3">Email Notifications</h6>
                                <div class="mb-4">
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-check-input" type="checkbox" id="emailAppointmentReminders" checked>
                                        <label class="form-check-label" for="emailAppointmentReminders">Appointment Reminders</label>
                                    </div>
                                    
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-check-input" type="checkbox" id="emailBillingReminders" checked>
                                        <label class="form-check-label" for="emailBillingReminders">Billing Reminders</label>
                                    </div>
                                    
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="emailLabResults" checked>
                                        <label class="form-check-label" for="emailLabResults">Lab Results</label>
                                    </div>
                                </div>
                                
                                <h6 class="mb-3">SMS Notifications</h6>
                                <div class="alert alert-info mb-4">
                                    <i class="fas fa-info-circle me-2"></i>
                                    SMS notifications require a valid SMS gateway configuration.
                                </div>
                                
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-outline-secondary me-2">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add User Modal -->
<div class="modal fade" id="addUserModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add New User</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="addUserForm">
                    <div class="mb-3">
                        <label for="userName" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="userName" required>
                    </div>
                    <div class="mb-3">
                        <label for="userEmail" class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="userEmail" required>
                    </div>
                    <div class="mb-3">
                        <label for="userRole" class="form-label">Role</label>
                        <select class="form-select" id="userRole" required>
                            <option value="">Select Role</option>
                            <option value="admin">Administrator</option>
                            <option value="doctor">Doctor</option>
                            <option value="nurse">Nurse</option>
                            <option value="receptionist">Receptionist</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Create User</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Tab persistence
    var settingsTab = localStorage.getItem('settingsTab');
    if (settingsTab) {
        var tab = new bootstrap.Tab(document.querySelector(settingsTab));
        tab.show();
    }
    
    var tabEls = document.querySelectorAll('#settingsMenu a[data-bs-toggle="list"]');
    tabEls.forEach(function(tabEl) {
        tabEl.addEventListener('shown.bs.tab', function (event) {
            localStorage.setItem('settingsTab', event.target.getAttribute('href'));
        });
    });
    
    // Form submission handlers
    document.querySelectorAll('form').forEach(form => {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Settings saved successfully!');
        });
    });
});
</script>
{% endblock %}
